<!doctype html>
<html lang="fr" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Tutoriel ‚Äî FaceWork</title>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body>
  <header class="appbar">
    <div class="container inner">
      <a class="brand" href="app/feed.html" aria-label="FaceWork">
        <div class="logo" aria-hidden="true"><img src="assets/fw-logo.png" alt=""/></div>
        <div style="line-height:1.1">
          <div style="font-size:18px; font-weight:950">FaceWork</div>
          <div style="font-size:12px; color:var(--muted); font-weight:800">Espace entreprise</div>
        </div>
      </a>

      <nav class="appnav" aria-label="Navigation application">
        <a data-app-nav href="index.html">üè† Accueil</a>
        <a data-app-nav href="app/feed.html">üì∞ Publications</a>
        <a data-app-nav href="app/channels.html"># Canaux</a>
        <a data-app-nav href="app/messages.html">üí¨ Messages</a>
        <a data-app-nav href="app/admin.html">üõ°Ô∏è Admin</a>
        <a data-app-nav href="app/settings.html">‚öôÔ∏è Param√®tres</a>
        <a data-app-nav href="tutoriel.html">üìò Tutoriel</a>
      </nav>

      <div class="userbox">
        <button class="btn icon" data-theme-toggle title="Basculer th√®me">üåì</button>
        <div class="row" style="gap:10px">
          <div class="avatar" data-user-avatar>FW</div>
          <div style="display:flex; flex-direction:column; line-height:1.1">
            <div style="font-weight:950" data-user-name>Utilisateur</div>
            <div class="sub" data-user-company>Entreprise</div>
          </div>
        </div>
        <button class="btn small" data-logout title="Se d√©connecter" aria-label="Se d√©connecter">
          <span aria-hidden="true">‚Ü©</span>
          <span class="hide-sm">D√©connexion</span>
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero tut-hero">
      <div class="hero-top">
        <span class="pill">Guide de d√©marrage</span>
        <label class="searchbar" aria-label="Rechercher dans le tutoriel">
          <span class="icon" aria-hidden="true">üîé</span>
          <input id="tutSearch" type="search" placeholder="Rechercher : canal, DM, avatar, Supabase‚Ä¶" />
        </label>
      </div>

      <h1 class="h1"><span class="grad">Tutoriel</span><br/>FaceWork</h1>
      <p class="lead">
        Prends l‚Äôapp en main en quelques minutes : connexion, publications, canaux, messages, param√®tres,
        et (optionnel) configuration Supabase.
      </p>

      <div class="hero-actions">
        <a class="btn primary" href="app/feed.html">Acc√©der √† l‚Äôapp</a>
        <a class="btn" href="login.html">Connexion</a>
        <a class="btn" href="index.html">Accueil</a>
      </div>

      <div class="callout" style="max-width: 72ch">
        <strong>Astuce :</strong> si tu ouvres une page de l‚Äôapp sans √™tre connect√©, tu seras redirig√© vers <code>login.html</code>.
      </div>
    </section>

    <section class="workbench card tut-shell" aria-label="Tutoriel FaceWork">
      <aside class="workbench-sidebar">
        <div class="row" style="justify-content:space-between; gap:10px; flex-wrap:wrap">
          <div class="badge">Sommaire</div>
          <div class="row" style="gap:8px; flex-wrap:wrap">
            <button class="btn small" type="button" id="tutExpandAll">Tout ouvrir</button>
            <button class="btn small ghost" type="button" id="tutCollapseAll">Tout fermer</button>
          </div>
        </div>

        <div class="side-title"><span>Chapitres</span></div>
        <div class="ch-list tut-nav">
          <a class="ch-item" href="#tut-connexion"><span class="truncate">1) Connexion & workspace</span><span class="hash">‚Üó</span></a>
          <a class="ch-item" href="#tut-feed"><span class="truncate">2) Publications (feed)</span><span class="hash">‚Üó</span></a>
          <a class="ch-item" href="#tut-canaux"><span class="truncate">3) Canaux</span><span class="hash">‚Üó</span></a>
          <a class="ch-item" href="#tut-dm"><span class="truncate">4) Messages (DM)</span><span class="hash">‚Üó</span></a>
          <a class="ch-item" href="#tut-settings"><span class="truncate">5) Param√®tres (profil)</span><span class="hash">‚Üó</span></a>
          <a class="ch-item" href="#tut-admin"><span class="truncate">6) Admin (r√¥les/membres)</span><span class="hash">‚Üó</span></a>
          <a class="ch-item" href="#tut-supabase"><span class="truncate">7) Supabase (optionnel)</span><span class="hash">‚Üó</span></a>
          <a class="ch-item" href="#tut-help"><span class="truncate">8) D√©pannage</span><span class="hash">‚Üó</span></a>
        </div>

        <div class="sidegroup">
          <div class="badge">Progression</div>
          <div class="spacer" style="height:10px"></div>
          <div class="checklist" aria-label="Checklist">
            <label class="check"><div><div class="t">Connexion</div><div class="d">Acc√®s √† l‚Äôapp + workspace</div></div><input data-tut-check="connexion" type="checkbox"/></label>
            <label class="check"><div><div class="t">Publier</div><div class="d">Cr√©er un post + fichier</div></div><input data-tut-check="feed" type="checkbox"/></label>
            <label class="check"><div><div class="t">Canaux</div><div class="d">Cr√©er / rejoindre un canal</div></div><input data-tut-check="canaux" type="checkbox"/></label>
            <label class="check"><div><div class="t">DM</div><div class="d">D√©marrer une conversation</div></div><input data-tut-check="dm" type="checkbox"/></label>
            <label class="check"><div><div class="t">Profil</div><div class="d">Avatar + infos</div></div><input data-tut-check="settings" type="checkbox"/></label>
          </div>
        </div>
      </aside>

      <section class="workbench-main">
        <div class="row" style="justify-content:space-between; flex-wrap:wrap; gap:12px; align-items:flex-end">
          <div>
            <h2 style="margin: 0; font-size: 30px; letter-spacing:-.4px">Commencer en 5 minutes</h2>
            <p class="page-sub" style="margin-top: 6px">Utilise la recherche pour filtrer les chapitres (ex: <span class="kbd">avatar</span>).</p>
          </div>
          <div class="badge" id="tutCount" aria-live="polite">‚Äî</div>
        </div>

        <div class="hr"></div>

        <details class="tut-details" id="tut-connexion" data-tut-title="connexion login workspace entreprise email mot de passe theme">
          <summary class="tut-summary">
            <span class="tut-left">
              <span class="tut-ico" aria-hidden="true">üîê</span>
              <span class="tut-txt">
                <span class="tut-title">Connexion & workspace</span>
                <span class="tut-meta">Se connecter + choisir l‚Äôentreprise (workspace)</span>
              </span>
            </span>
            <span class="tut-right">
              <span class="badge">1</span>
            </span>
          </summary>
          <div class="tut-body">
            <p>
              Va sur <a href="login.html"><code>login.html</code></a> puis remplis : <strong>Email</strong>, <strong>Entreprise / workspace</strong>, et <strong>mot de passe</strong>.
              Ensuite, tu peux acc√©der √† l‚Äôapp (<code>/app</code>).
            </p>
            <ul>
              <li><strong>D√©mo sans Supabase :</strong> l‚Äôutilisateur est stock√© dans <code>localStorage</code> (mode ‚Äúmaquette‚Äù).</li>
              <li><strong>Avec Supabase :</strong> authentification r√©elle + donn√©es partag√©es entre utilisateurs d‚Äôun m√™me workspace.</li>
              <li><strong>Th√®me :</strong> bouton üåì en haut (pr√©f√©rence sauvegard√©e).</li>
            </ul>
            <div class="row" style="gap:10px; flex-wrap:wrap; margin-top: 10px">
              <a class="btn small primary" href="login.html">Ouvrir Connexion</a>
              <a class="btn small" href="app/feed.html">Ouvrir l‚Äôapp</a>
            </div>
          </div>
        </details>

        <details class="tut-details" id="tut-feed" data-tut-title="publications feed post fichier upload liker reaction commentaire composer">
          <summary class="tut-summary">
            <span class="tut-left">
              <span class="tut-ico" aria-hidden="true">üì∞</span>
              <span class="tut-txt">
                <span class="tut-title">Publications (feed)</span>
                <span class="tut-meta">Cr√©er une publication + aimer + fichier</span>
              </span>
            </span>
            <span class="tut-right"><span class="badge">2</span></span>
          </summary>
          <div class="tut-body">
            <p>Dans <a href="app/feed.html"><code>app/feed.html</code></a> :</p>
            <ul>
              <li>Descends sur <strong>Composer</strong>.</li>
              <li>Renseigne <strong>Titre</strong> + <strong>Message</strong>.</li>
              <li>Optionnel : ajoute un fichier (lien) ou d√©pose un fichier dans la zone.</li>
              <li>Clique <strong>Publier</strong> puis teste le bouton ‚ù§Ô∏è sur les posts.</li>
            </ul>
            <div class="callout">
              <strong>Note :</strong> en mode d√©mo (sans Supabase), tes posts restent dans ton navigateur (localStorage).
            </div>
          </div>
        </details>

        <details class="tut-details" id="tut-canaux" data-tut-title="canaux channels discord public prive vocal message visio">
          <summary class="tut-summary">
            <span class="tut-left">
              <span class="tut-ico" aria-hidden="true">#</span>
              <span class="tut-txt">
                <span class="tut-title">Canaux</span>
                <span class="tut-meta">Organiser les discussions par th√®mes</span>
              </span>
            </span>
            <span class="tut-right"><span class="badge">3</span></span>
          </summary>
          <div class="tut-body">
            <p>Sur <a href="app/channels.html"><code>app/channels.html</code></a> :</p>
            <ul>
              <li>Clique <strong>Ôºã Cr√©er un canal</strong> (public / priv√© / vocal).</li>
              <li>S√©lectionne un canal dans la liste pour ouvrir la conversation.</li>
              <li>Optionnel : teste la visio (üìπ) si activ√©e (HTTPS ou Live Server).</li>
            </ul>
            <div class="row" style="gap:10px; flex-wrap:wrap; margin-top: 10px">
              <a class="btn small primary" href="app/channels.html">Ouvrir Canaux</a>
              <a class="btn small" href="app/salon.html">Ouvrir Salons</a>
            </div>
          </div>
        </details>

        <details class="tut-details" id="tut-dm" data-tut-title="messages dm conversation prive contact envoyer fichier">
          <summary class="tut-summary">
            <span class="tut-left">
              <span class="tut-ico" aria-hidden="true">üí¨</span>
              <span class="tut-txt">
                <span class="tut-title">Messages (DM)</span>
                <span class="tut-meta">Conversations priv√©es, comme sur Discord</span>
              </span>
            </span>
            <span class="tut-right"><span class="badge">4</span></span>
          </summary>
          <div class="tut-body">
            <p>Dans <a href="app/messages.html"><code>app/messages.html</code></a> :</p>
            <ul>
              <li>Clique <strong>Ôºã Nouveau DM</strong> puis choisis un contact.</li>
              <li>√âcris un message et envoie.</li>
              <li>Optionnel : joins un fichier (si activ√©) ou lance une visio.</li>
            </ul>
            <div class="callout">
              <strong>Conseil :</strong> utilise des noms diff√©rents (Param√®tres) pour simuler plusieurs profils en mode d√©mo.
            </div>
          </div>
        </details>

        <details class="tut-details" id="tut-settings" data-tut-title="parametres profil avatar nom entreprise settings reset demo">
          <summary class="tut-summary">
            <span class="tut-left">
              <span class="tut-ico" aria-hidden="true">‚öôÔ∏è</span>
              <span class="tut-txt">
                <span class="tut-title">Param√®tres (profil)</span>
                <span class="tut-meta">Avatar + infos personnelles</span>
              </span>
            </span>
            <span class="tut-right"><span class="badge">5</span></span>
          </summary>
          <div class="tut-body">
            <p>Sur <a href="app/settings.html"><code>app/settings.html</code></a> :</p>
            <ul>
              <li>Ajoute un <strong>avatar</strong> (upload) ou une <strong>URL</strong>.</li>
              <li>Modifie ton <strong>nom</strong> et ton <strong>entreprise</strong>.</li>
              <li>Clique <strong>Enregistrer</strong> puis v√©rifie le header (avatar + nom).</li>
              <li>Utilise <strong>R√©initialiser la d√©mo</strong> si tu veux repartir de z√©ro.</li>
            </ul>
            <div class="codeblock">
              <div class="codebar">
                Reset rapide (d√©mo)
                <button class="btn small" type="button" data-copy="#code-reset">Copier</button>
              </div>
              <pre id="code-reset">localStorage.removeItem("fwUser");
location.href = location.pathname.includes("/app/") ? "../login.html" : "login.html";</pre>
            </div>
          </div>
        </details>

        <details class="tut-details" id="tut-admin" data-tut-title="admin roles membres permissions workspace">
          <summary class="tut-summary">
            <span class="tut-left">
              <span class="tut-ico" aria-hidden="true">üõ°Ô∏è</span>
              <span class="tut-txt">
                <span class="tut-title">Admin (r√¥les / membres)</span>
                <span class="tut-meta">G√©rer les r√¥les et l‚Äôacc√®s (d√©mo)</span>
              </span>
            </span>
            <span class="tut-right"><span class="badge">6</span></span>
          </summary>
          <div class="tut-body">
            <p>Dans <a href="app/admin.html"><code>app/admin.html</code></a> :</p>
            <ul>
              <li>Cr√©e des <strong>r√¥les</strong> (ex: Admin, RH, Dev) + couleur.</li>
              <li>Ajoute des <strong>membres</strong> et attribue un r√¥le.</li>
              <li>Avec Supabase, le <strong>premier membre</strong> d‚Äôun workspace devient admin automatiquement (trigger SQL).</li>
            </ul>
          </div>
        </details>

        <details class="tut-details" id="tut-supabase" data-tut-title="supabase schema sql auth storage netlify url key env.js">
          <summary class="tut-summary">
            <span class="tut-left">
              <span class="tut-ico" aria-hidden="true">üß©</span>
              <span class="tut-txt">
                <span class="tut-title">Supabase (optionnel)</span>
                <span class="tut-meta">Activer l‚Äôauth + base de donn√©es + upload</span>
              </span>
            </span>
            <span class="tut-right"><span class="badge">7</span></span>
          </summary>
          <div class="tut-body">
            <p>Si tu veux passer de la d√©mo locale √† une app connect√©e :</p>
            <ul>
              <li>Applique <a href="supabase/schema.sql"><code>supabase/schema.sql</code></a> dans le SQL Editor.</li>
              <li>Active le provider Email (Supabase Auth).</li>
              <li>Mets tes cl√©s dans <a href="js/env.js"><code>js/env.js</code></a> (Project URL + Publishable/Anon key).</li>
              <li>(Upload) Cr√©e un bucket <code>facework</code> et applique <code>supabase/storage.sql</code>.</li>
            </ul>
            <div class="codeblock">
              <div class="codebar">
                Exemple de config (env.js)
                <button class="btn small" type="button" data-copy="#code-env">Copier</button>
              </div>
              <pre id="code-env">window.FW_ENV = window.FW_ENV || {
  SUPABASE_URL: "https://xxxx.supabase.co",
  SUPABASE_KEY: "sb_publishable_...",
  SUPABASE_BUCKET: "facework",
  SUPABASE_COMPANY: "Entreprise",
};</pre>
            </div>
          </div>
        </details>

        <details class="tut-details" id="tut-help" data-tut-title="depannage debug live server file localstorage redirection app theme">
          <summary class="tut-summary">
            <span class="tut-left">
              <span class="tut-ico" aria-hidden="true">üßØ</span>
              <span class="tut-txt">
                <span class="tut-title">D√©pannage</span>
                <span class="tut-meta">Les probl√®mes les plus fr√©quents</span>
              </span>
            </span>
            <span class="tut-right"><span class="badge">8</span></span>
          </summary>
          <div class="tut-body">
            <ul>
              <li><strong>Je suis redirig√© vers la connexion :</strong> c‚Äôest normal si tu n‚Äôes pas connect√© (guard des pages <code>/app</code>).</li>
              <li><strong>En <code>file://</code> √ßa bug :</strong> utilise Live Server (voir <a href="README.md"><code>README.md</code></a>).</li>
              <li><strong>Copie impossible :</strong> certains navigateurs bloquent le presse‚Äëpapiers sans HTTPS / interaction utilisateur.</li>
              <li><strong>Supabase ‚Äúd√©sactiv√©‚Äù :</strong> v√©rifie <code>js/env.js</code> (URL + key) et recharge.</li>
            </ul>
            <div class="callout">
              <strong>Debug :</strong> ouvre la console navigateur et cherche les erreurs JavaScript (F12 ‚Üí Console).
            </div>
          </div>
        </details>
      </section>
    </section>

    <footer class="footer">
      <div class="inner container">
        <div>
          <div style="font-weight:950; color:var(--text)">FaceWork</div>
          <div style="margin-top:6px">Tutoriel ‚Äî d√©mo statique HTML/CSS/JS.</div>
        </div>
        <div class="col" style="gap:8px">
          <div class="badge">Liens</div>
          <a href="index.html">Accueil</a>
          <a href="login.html">Connexion</a>
          <a href="app/feed.html">Acc√©der √† l‚Äôapp</a>
        </div>
      </div>
    </footer>
  </main>

  <div class="toast" role="status" aria-live="polite">
    <div class="t">Info</div>
    <div class="d">‚Äî</div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/env.js"></script>
  <script src="js/supabase.js"></script>
  <script src="js/site.js"></script>
  <script src="js/tutorial.js"></script>
</body>
</html>
